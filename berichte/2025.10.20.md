# ITSE Arbeitsbericht
## Meta Informationen
Klasse: 4AHITS  
Name: David Weinberger   
Fach: ITSE-Labor   
Datum: 13.10.2025     

## Übung (ping)

### Angabe
Als host discovery (host scanning) versteht man den Vorgang um unbekannte Geräte in einem Netzwerk zu finden, bzw. festzustellen ob bekannte Geräte im Netzwerk erreichbar sind.

Das einfachste Werkzeug dafür ist ping.

Verwende Kali und Metasploitable im Bridged Mode (Bridge ins Labor-Netzwerk)
Experimentiere mit ping im Labor-Netzwerk (Metasploitable, Default Gateway, …)
Recherchiere zu den Optionen von ping, erstelle ein kleines Cheat Sheet
Welchen Netzwerkdienst verwendet der ping Dienst? Recherchiere wie Firewalls häufig mit ping umgehen.

### Linux

- c <count> — Anzahl Requests 

- i <interval> — Sekunden zwischen Paketen 

- s <size> — Payload-Größe in Bytes

- W <timeout> — Timeout pro Reply in Sekunden

- w <deadline> — Gesamttimeout in Sekunden

- n — keine Namensauflösung

- q — nur Summary ausgeben

- f — flood (root, sehr vorsichtig)

- 4 / -6 — IPv4 / IPv6 erzwingen
 
 
### Windows 

-n <count>, -l <size>, -w <timeout-ms>, -t (endlos)

 
## Übung (ping Script)

### Angabe
Schreibe ein shell Skript das automatisiert (Schleife) alle Hosts im subnet anpingt. Die Ausgabe soll so sein, dass man daraus die aktiven Hosts erkennen kann (für nicht aktive Hosts soll keine Ausgabe sein).

### Code
```
!/bin/bash

for((i=1; i < 255;i++)); do

        ip=192.168.15.$i

                 timeout 0.05 ping -c1 $ip > /dev/null 2>&1

        if [ $? -eq 0 ]; then
        echo "$ip ist erreichbar"
        fi

done
```

### Erklärung

```for((i=1; i < 255;i++)); do
 ip=192.168.15.$i
```
Die Schleife zählt von 1 weg bis 254 (weil nur Hosts im jeweiligen Subnet gepingt werden sollen).
Dann erfolgt die Ip Zuweisung, in meinem Fall ist das Subnet 15. 

```
timeout 0.05 ping -c1 $ip > /dev/null 2>&1
```
Den Befehl timeout verwendet man dafür das er nur 50ms lang den ping probiert, danach bricht er ab und zählt die Schleife weiter, sonst würde er 1 Sekunde pro Ping brauchen, was sehr lange ist bei 254 pings. 
Das -c1 bedeutet nur ein einziges ICMP-Echo-Paket (Ping) wird gesendet.
Das ```> /dev/null 2>&1 ``` bedeutet dass die Standartausgaben direkt ins nichts weitergeleitet wird, da dann sowieso eine eigene echo Ausgabe folgt.



```
 if [ $? -eq 0 ]; then
        echo "$ip ist erreichbar"
        fi
```
Das ```$?``` ist das zuletzt übergebene Argument. 
Das ```-eq 0``` prüft ob das letzte Exit-Code gleich 0 ist, wenn ja dann kommt man in das if rein.
Im if wird dann ausgegeben dass diese Ip erfolgreich gepingt wurde, wenn nicht wird gar nichts ausgegeben und einfach die nächste Ip genommen.

## Übung (host discovery)

### Recherche zu Nmap
Nmap ist ein Kommandozeilen‑Tool zum Auffinden von Hosts und zum Scannen von Netzwerkdiensten. Ein Ping‑Scan (Host‑Discovery) in Nmap wird mit der Option `-sn` ausgeführt und ermittelt nur, welche Hosts im Zielnetz „up“ sind, ohne Ports zu scannen. Je nach Rechten sendet Nmap dabei unterschiedliche Probe‑Pakete: als Root im lokalen LAN nutzt es ARP‑Requests (sehr zuverlässig), sonst ICMP‑, TCP‑SYN/ACK‑ oder UDP‑Probes, die von Firewalls geblockt werden können. Die Ausgabe meldet für gefundene Geräte typischerweise „Host is up“ und liefert bei ARP‑Erkennung zusätzlich MAC‑Adressen und Vendor‑Infos.

### Recherche zu Erweiterungen von Nmap

-sS — Führt einen TCP‑SYN‑Scan (halboffener Scan) durch, der schnell Ports erkundet, ohne vollständige Verbindungen aufzubauen.

-sU — Scannt UDP‑Ports, um auf UDP‑Dienste zu prüfen (langsamer und fehleranfälliger wegen fehlender Antworten).

-p <ports> — Gibt explizit welche Ports oder Port‑Bereiche gescannt werden sollen (z. B. -p 1-1024,80,443).

-A — Aktiviert aggressive Erkennung (OS‑Fingerprinting, Service‑Versionen, NSE‑Skripte und Traceroute) für umfassende Informationen.

-O — Versucht das Betriebssystem des Ziels zu erkennen anhand charakteristischer Netzwerkantworten.

-Pn — Überspringt die Host‑Discovery und behandelt alle Ziele als „up“.

-oA <prefix> — Speichert die Ergebnisse simultan in allen drei Formaten (.nmap, .gnmap, .xml) unter dem angegebenen Prefix zur späteren Analyse.


### Ermittlung aller aktiven Hosts

Befehl:
`sudo nmap -sn 192.168.1.0/24`

## (Übung Alternativen)

Wenn `ping` oder `nmap` nicht zur Verfügung stehen, gibt es verschiedene andere Methoden, um herauszufinden, welche Geräte in einem Netzwerk aktiv sind: Auf dem lokalen LAN ist das Abfragen auf Schicht‑2‑Ebene (ARP) sehr zuverlässig, weil Geräte auf ARP‑Anfragen antworten und so sichtbar werden; spezialisierte Werkzeuge nutzen genau das oder lauschen passiv auf ARP‑Traffic, um Hosts zu entdecken. Es gibt auch Tools, die viele Adressen parallel mit einfachen Echo‑Anfragen testen, was für große Adressbereiche schneller ist, sowie Hochgeschwindigkeits‑Scanner, die asynchron Tausende von Zielen gleichzeitig prüfen. Für spezielle Umgebungen existieren Programme, die NetBIOS‑ oder andere Protokollantworten auswerten, und Bibliotheken, mit denen man eigene Netzwerkpakete bauen kann, um sehr gezielt nach Antworten zu suchen. Außerdem liefern lokale Systemtabellen wie der ARP‑Cache bereits bekannte Nachbarn, die einen schnellen Hinweis auf erreichbare Hosts geben. Insgesamt nutzt man also entweder ARP‑basierte Methoden, parallele/skalierbare Ping‑Ansätze, Protokoll‑spezifische Abfragen, passive Überwachung oder maßgeschneiderte Paketwerkzeuge, je nach Zugriffsrechten, Netztyp und benötigter Geschwindigkeit.
